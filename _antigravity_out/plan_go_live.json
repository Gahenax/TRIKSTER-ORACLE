{
  "meta": {
    "name": "Web Viewer Go-Live Hardening",
    "created_at": "2026-02-11T22:52:01.564571+00:00",
    "repo_root": "C:\\Users\\USUARIO\\.gemini\\antigravity\\playground\\TRIKSTER-ORACLE"
  },
  "tasks": [
    {
      "id": "WV-GO-00",
      "title": "Add request id + access logging middleware",
      "summary": "Add X-Request-Id propagation and structured access logs to avoid blind ops.",
      "outputs": [
        "viewer\\middleware\\request_id.py",
        "viewer\\logging_conf.py"
      ],
      "dod": [
        "All HTTP responses include X-Request-Id",
        "Access logs emit JSON per request with method/path/status/latency_ms/request_id"
      ],
      "commands": [],
      "gates": [],
      "rollback": [
        "git checkout -- viewer/middleware/request_id.py viewer/logging_conf.py"
      ],
      "depends_on": []
    },
    {
      "id": "WV-GO-01",
      "title": "Add rate limiting middleware (v1)",
      "summary": "Add a simple in-memory limiter; recommend edge limiting via Nginx/Cloudflare in prod.",
      "outputs": [
        "viewer\\middleware\\ratelimit.py"
      ],
      "dod": [
        "Excess requests return 429",
        "Limiter applies to /health, /reports, /attestation routes"
      ],
      "commands": [],
      "gates": [],
      "rollback": [
        "git checkout -- viewer/middleware/ratelimit.py"
      ],
      "depends_on": [
        "WV-GO-00"
      ]
    },
    {
      "id": "WV-GO-02",
      "title": "Add Nginx reverse proxy template",
      "summary": "Generate deploy/nginx/viewer.conf template with safe defaults, ready for HTTPS.",
      "outputs": [
        "deploy\\nginx\\viewer.conf"
      ],
      "dod": [
        "Template exists",
        "Includes proxy headers + client_max_body_size + limit_req"
      ],
      "commands": [
        "python -c \"print('Nginx template generated')\""
      ],
      "gates": [],
      "rollback": [
        "git checkout -- deploy/nginx/viewer.conf"
      ],
      "depends_on": [
        "WV-GO-01"
      ]
    },
    {
      "id": "WV-GO-03",
      "title": "Add go-live gate script",
      "summary": "Create an automated gate script to validate health, read-only, signature verify, and soft load.",
      "outputs": [
        "_antigravity_out\\go_live_gate.py"
      ],
      "dod": [
        "Script runs against local server and returns ok:true"
      ],
      "commands": [],
      "gates": [],
      "rollback": [],
      "depends_on": [
        "WV-GO-01"
      ]
    },
    {
      "id": "WV-GO-04",
      "title": "Attestation scaffold",
      "summary": "Generate attestation module for pack-level integrity hash.",
      "outputs": [
        "viewer\\attestation.py"
      ],
      "dod": [
        "attestation.py exists with compute_pack_hash()"
      ],
      "commands": [],
      "gates": [],
      "rollback": [],
      "depends_on": [
        "WV-GO-01"
      ]
    }
  ]
}